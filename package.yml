name       : lazarus
version    : 1.8.4
release    : 6
source     :
    - ftp://ftp.freepascal.org/pub/lazarus/releases/Lazarus%20Zip%20_%20GZip/Lazarus%201.8.4/lazarus-1.8.4.tar.gz : 5a9801ac341a322ad1fa104d373f154d8ab72ba0add1693d0dcc8d936e6c10e9
license    :
    - GPL-2.0-or-later
    - LGPL-2.1-or-later
    - MPL-1.1
component  : programming.tools
summary    : Lazarus is a Rapid Application Development Tool for Free Pascal
description: |
    Lazarus is a Rapid Application Development Tool for Free Pascal.
builddeps  :
    - pkgconfig(gtk+-2.0)
    - fpc-src
rundeps    :
    - fpc-src
    - gdb
    - make
setup      : |
    %patch -p1 < $pkgfiles/0001-patch-desktop-file.patch

    # do some cleanup
    rm -rf debian
    pushd tools
        find install -depth -type d ! \( -path "install/linux/*" -o -path "install/linux" -o -path "install" \) -exec rm -rf '{}' \;
    popd
build      : |
    export FPCDIR=/usr/share/fpc/src

    fpcmake -Tall
    pushd components
        fpcmake -Tall
    popd

    make bigide OPT='-gl -gw'
    make tools OPT='-gl -gw'
install    : |
    %make_install INSTALL_PREFIX=$installdir/usr
